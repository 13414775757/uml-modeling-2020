# 实验二

## 一、实验目标

1. 熟悉用Markdown文件编写实验报告；
2. 熟悉用StarUML绘制用例图；
3. 掌握用例规约的编写。

## 二、实验内容

1. 细化选题功能；
2. 使用StarUML绘制用例图；
3. 编写用例规约表格；
4. 编写实验报告。

## 三、实验步骤

1. 细化选题功能：
   - 改“用户”为“口罩买家”；
   - 删除“保存数据库”等啰嗦语句。
2. 在StarUML绘制用例图：
   - 打开StarUML，在Model文件夹右键，选择“Add Diagram”，新建“Use Case Diagram”；
   - 创建一个名为“口罩买家”的参与者；
   - 创建三个功能用例，分别为“提交个人信息”，“提交口罩预约订单”和“查询已预约订单的信息”；
   - 连接“口罩买家”和三个用例。
3. 编写用例规约表格。

## 四、实验结果

![用例图](./lab2_UseCaseDiagram.jpg)    

图1 ：口罩预约小程序的用例图



#### 表1：提交个人信息用例规约

| 用例编号 | UC001                                                        | 备注             |
| -------- | ------------------------------------------------------------ | ---------------- |
| 用例名称 | 提交个人信息                                                 |                  |
| 前置条件 | 系统获取口罩买家授权的微信openId                             | 可选             |
| 后置条件 | 系统跳转回小程序首页                                         | 可选             |
| 基本流程 | 1.口罩买家点击“提交个人信息”链接；                           | 用例执行成功步骤 |
| ~        | 2.系统显示“提交个人信息”页面；                               |                  |
| ~        | 3.口罩买家输入“姓名”、“手机号码”、“身份证号”，点击“提交”按钮； |                  |
| ~        | 4.系统检查手机号码和身份证号的填写格式正确，将这三条数据结合openId新增到“用户信息表”中； |                  |
| ~        | 5.系统提示“提交成功”，并跳转回小程序首页。                   |                  |
| 扩展流程 | 4.1 系统检查口罩买家的手机号码格式填写有误，提示“手机号码填写有误”； | 用例执行失败     |
| ~        | 4.2 系统检查口罩买家的身份证号格式填写有误，提示“身份证号填写有误”。 |                  |



#### 表2：提交口罩预约订单用例规约

| 用例编号 | UC002                                                        | 备注             |
| -------- | ------------------------------------------------------------ | ---------------- |
| 用例名称 | 提交口罩预约订单                                             |                  |
| 前置条件 | 口罩买家已提交个人信息                                       | 可选             |
| 后置条件 | 系统显示订单信息页面                                         | 可选             |
| 基本流程 | 1.口罩买家点击“口罩预约”链接；                               | 用例执行成功步骤 |
| ~        | 2.系统显示“提交口罩预约订单”页面；                           |                  |
| ~        | 3.口罩买家选择“预约数量”、“预约门店地址”，点击“预约”按钮；   |                  |
| ~        | 4.系统检查预约数量不超过2包，并且预约的门店有存货，将口罩数量和预约门店地址，结合微信openId，写入“订单表”中，同时减去预约门店的口罩存货数量； |                  |
| ~        | 5.系统提示“预约成功”，并跳转到订单信息页面。                 |                  |
| 扩展流程 | 4.1 系统检查到预约数量超过两包，提示"口罩数量每人仅限2包"；  | 用例执行失败     |
| ~        | 4.2 系统检测预约门店存货数量小于预约的口罩数量，提示“所选门店口罩存货不足”。 |                  |



#### 表3：查询已预约订单的信息用例规约

| 用例编号 | UC003                                                        | 备注             |
| -------- | ------------------------------------------------------------ | ---------------- |
| 用例名称 | 查询已预约订单的信息                                         |                  |
| 前置条件 | 系统获取口罩买家授权的微信openId                             | 可选             |
| 后置条件 | 系统显示订单信息页面                                         | 可选             |
| 基本流程 | 1.口罩买家点击“我的订单”链接                                 | 用例执行成功步骤 |
| ~        | 2.系统用口罩买家的微信openId在“订单表”中查询到相关记录；     |                  |
| ~        | 3.系统跳转到订单信息页面，并显示相关订单的信息；             |                  |
| 扩展流程 | 2.1 系统查询不到相关订单记录，不跳转，并提示“您未提交过订单”。 | 用例执行失败     |

